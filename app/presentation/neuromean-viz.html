<div class="neuromean-viz">
  <svg 
      viewbox="0 0 1000 500"
      preserveAspectRatio="xMidYMid meet"
    >
    
    <defs>
      <linearGradient id="fill_slugbody" x2="0%" y2="100%">
        <stop stop-color="#986" offset="10%" />
        <stop stop-color="#631" offset="80%" />
      </linearGradient>
      
      <linearGradient id="fill_papilla" x2="0%" y2="100%">
        <stop stop-color="#ccc" offset="10%" />
        <stop stop-color="#ffc" offset="20%" />
        <stop stop-color="#986" offset="80%" />
      </linearGradient>    

      <filter id="dropshadow" x="0" y="0" width="200%" height="200%">
        <feOffset result="offOut" in="SourceAlpha" dx="10" dy="10" />
        <feGaussianBlur result="blurOut" in="offOut" stdDeviation="30" />
        <feBlend in="SourceGraphic" in2="blurOut" mode="normal" />
      </filter>

      <symbol id="figure_slugbody">
        <path
            fill="url(#fill_slugbody)"
            d="M-10,100 
               L950,100
               C1000,100 1000,180 950,200
               C600,300 800,300 900,510
               L800,510 
               L-10,500
               Z"
            />
      </symbol>
  
      <symbol id="figure_papilla">
        <path
            stroke="#642"
            stroke-width="2"
            fill="url(#fill_papilla)"
            d="M10,60
               l20,-30
               l0,-20
               l5,0
               l5,5
               l5,-5
               l5,0
               l0,20
               l20,30
               Z">
      </symbol>

      
    </defs>
    



    <g filter="url(#dropshadow)">
      <use href="#figure_papilla" 
          data-ng-repeat="papilla in papillae"
          ng-attr-x="{{-50 + (1+papilla.index) * (900 / (numPapillae+1))}}" 
          y="50"
          class="neuromean-viz-papilla"
          ></use>
      
      
      <use href="#figure_slugbody"></use>
    </g>

      
    </path>

  </svg>
  
  <table class="neuromean-viz-controls">
    <tr>
      <td>
        <label>Papillae</label>
      </td>
      <td>
        <input type="range" min="7" max="30"
            data-ng-model="numPapillae">
      </td>
      <td>
        {{papillae.length}}
      </td>
    </tr>
  </table>
</div>
